\def\mytitle{Challenge - Pairs Game}
\def\myauthor{Emmanuel Miras \newline Zoe Wall}
\def\contact{40168970@napier.ac.uk \newline40182161@napier.ac.uk}
\def\mymodule{Fundamentals of Parallel Systems (SET09109}

\documentclass[10pt, a4paper]{article}
\usepackage[a4paper,outer=1.5cm,inner=1.5cm,top=1.75cm,bottom=1.5cm]{geometry}
\onecolumn
\usepackage{graphicx}
\graphicspath{{./images/}}
%colour our links, remove weird boxes
\usepackage[colorlinks,linkcolor={black},citecolor={blue!80!black},urlcolor={blue!80!black}]{hyperref}
%Stop indentation on new paragraphs
\usepackage[parfill]{parskip}
%% all this is for Arial
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{uarial}
\renewcommand{\familydefault}{\sfdefault}
%Napier logo top right
\usepackage{watermark}
%Lorem Ipusm dolor please don't leave any in you final repot ;)
\usepackage{lipsum}
\usepackage{xcolor}
\usepackage{listings}
%give us the Capital H that we all know and love
\usepackage{float}
%tone down the linespacing after section titles
\usepackage{titlesec}
%Cool maths printing
\usepackage{amsmath}
%PseudoCode
\usepackage{algorithm2e}

\titlespacing{\subsection}{0pt}{\parskip}{-3pt}
\titlespacing{\subsubsection}{0pt}{\parskip}{-\parskip}
\titlespacing{\paragraph}{0pt}{\parskip}{\parskip}
\newcommand{\figuremacro}[5]{
    \begin{figure}[#1]
        \centering
        \includegraphics[width=#5\textwidth]{#2}
        \caption[#3]{\textbf{#3}#4}
        \label{fig:#2}
    \end{figure}
}

\newcommand{\figuremacroF}[5]{
	\begin{figure}[#1]
		\centering
		\includegraphics[width=#5\textwidth]{#2}
		\caption[#3]{\textbf{#3}#4}
		\label{fig:#2}
	\end{figure}
}

\lstset{
	escapeinside={/*@}{@*/}, language=C++,
	basicstyle=\fontsize{8.5}{12}\selectfont,
	numbers=left,numbersep=2pt,xleftmargin=2pt,frame=tb,
    columns=fullflexible,showstringspaces=false,tabsize=4,
    keepspaces=true,showtabs=false,showspaces=false,
    backgroundcolor=\color{white}, morekeywords={inline,public,
    class,private,protected,struct},captionpos=t,lineskip=-0.4em,
	aboveskip=10pt, extendedchars=true, breaklines=true,
	prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	keywordstyle=\color[rgb]{0,0,1},
	commentstyle=\color[rgb]{0.133,0.545,0.133},
	stringstyle=\color[rgb]{0.627,0.126,0.941}
}

%\thiswatermark{\centering \put(336.5,-38.0){\includegraphics[scale=0.8]{logo}} }
\title{\mytitle}
\author{\myauthor\hspace{1em}\\\contact\\Edinburgh Napier University\hspace{0.5em}-\hspace{0.5em}\mymodule}
\date{}
\hypersetup{pdfauthor=\myauthor,pdftitle=\mytitle}
\sloppy
\begin{document}
	\maketitle	
	
	
	\section{Requirement 2}
	
%	how difficult to implement
%	To provide a critical review, of no more than 250 words, of the supplied implementation in terms of its:
%	Use of data structures
%	Communication structures and interactions

	%it was clientserver
	
	Within the original implementation the Player Manager process acted as a server and the Controller Manager process acted as a client. In order to implement the required changes, the roles had to be switched. This proved to be quite straightforward, the logic needed for enrolment of the player was abstracted into a new process called Enrol Player, in doing so the Player Manager can be treated as a pure server as it no longer handles the initialisation of the player. 
	
	% logic was there, just switched channels
	
	% use of ds: getgame details added more information. add more variables 
	
	
	
	%having done this the Player Manager had no need to act as a client. %this took away the need for the player manager to be a server, as it only needs to make the first communication to enrol. after enrolment, the controller manager should control each player manager.
	
	
	
	
	\section{Requirement 3}
	
	\subsection{Process Network}
	
	\figuremacro{H}{processNetwork}{Process Network}{ - diagram to show channel connections in the Pairs Game network.}{1.0}
	
	\subsection{Channel Interaction}
	
	\figuremacro{H}{channelInt}{Channel Interaction Sequence}{ - diagram to show the sequence of interactions between channels.}{1.0}
	
	\subsection{Explanation}
	
	The above diagrams detail a modified version of the Pairs Game system to add the functionality of taking turns and dynamically updating every players interface to match the game state.
	
	\subparagraph{Turns}	
	To implement player turns, the Controller Manager must keep track of every player initialised within a list. To initialise a player, a modified EnrolPlayer object, which contains the location of the player sending the request and the player id, is copied to the Controller Manager. Once the player has been enrolled they are added to a list of current players, which the Controller Manager can iterate through to request for card selections and send a map of square coordinates for updating the game state.
	
	\subparagraph{Updates}
	The main change to the communications structure is to modify the behaviour of both the Player Manager and Controller Manager.	The proposed solution is to have multiple channel inputs to the Player Manager that are allocated dynamically once the player has been enrolled. In doing so, each of the Player Managers can act as pure servers. This means that the Controller Manager can issue requests to every Player Manager to update their interfaces without the risk of dead-lock. With the current structure, this causes an issue with the enrolment of players as they must initiate the connection to the Controller Manager therefore acting as clients. To solve this, the enrolment logic from the Player Manager is abstracted into another process which can act as a client. An enrolment request can therefore be copied through an event handling system using an overwriting buffer to the Controller Manager client that obeys the client-server pattern.
	
	\section{Requirement 3}
	\subsection{Group H}
	
%	1.	Use of data Structures
%	2.	Communications structures and interactions
%	3.	Did the game work as intended and if not why not?
%	4.	Was the operation of the game intuitive and reflect the Challenge Requirements?

	The game was fully operational as intende
	
	%pair if you click itself
	%withdraw not working
	%delay too long?
	
	\subsection{Group J}
	
	% button
	%working
	
\end{document}
